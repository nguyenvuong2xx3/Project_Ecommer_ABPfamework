@{
  ViewData["Title"] = "Order";
  Layout = "~/Views/Shared/Layout/Customer/_LayoutCustomer.cshtml";
}

<div class="container success-container" style="padding-top: 100px; margin-top: 100px; margin-bottom: 50px;">
  <div class="text-center">
    <div class="success-icon">
      <i class="bi bi-check-circle-fill"></i>
    </div>
    <h2 class="mb-3">Đặt hàng thành công!</h2>
    <p class="text-muted">Cảm ơn bạn đã đặt hàng. Đơn hàng của bạn đã được tiếp nhận và đang được xử lý.</p>
    <a asp-controller="HomeCustomer" asp-action="Index" class="btn btn-success mt-3">Tiếp tục mua sắm</a>
  </div>

  <div class="row mt-5">
    <div class="col-md-12">
      <div class="summary-box p-4">
        <h4 class="mb-4 text-center">Tóm tắt đơn hàng</h4>

        <!-- Thông tin chung -->
        <div class="row mb-4">
          <div class="col-md-6">
            <div class="info-item">
              <span class="fw-bold">Trạng thái:</span>
              <span class="status-badge">
                @switch (Model.Status)
                {
                  case 0:
                    <span class="badge bg-warning text-dark">Chờ xác nhận</span>
                    break;
                  case 1:
                    <span class="badge bg-info text-white">Đã xác nhận</span>
                    break;
                  case 2:
                    <span class="badge bg-primary text-white">Đang giao</span>
                    break;
                  case 3:
                    <span class="badge bg-success text-white">Hoàn thành</span>
                    break;
                  case 4:
                    <span class="badge bg-danger text-white">Đã hủy</span>
                    break;
                  default:
                    <span class="badge bg-secondary text-white">Không xác định</span>
                    break;
                }
              </span>
            </div>
            <div class="info-item mt-2">
              <span class="fw-bold">Tên người đặt:</span>
              <span>@Model.UserName</span>
            </div>
          </div>
          <div class="col-md-6">
            <div class="info-item">
              <span class="fw-bold">Email:</span>
              <span>@Model.EmailAddress</span>
            </div>
            <div class="info-item mt-2">
              <span class="fw-bold">Phương thức thanh toán:</span>
              <span class="payment-badge">
                @switch (Model.PaymentMethod)
                {
                  case 0:
                    <span class="badge bg-cash">Tiền mặt</span>
                    break;
                  case 1:
                    <span class="badge bg-bank-transfer">Chuyển khoản</span>
                    break;
                  case 2:
                    <span class="badge bg-credit-card">Thẻ tín dụng</span>
                    break;
                  default:
                    <span class="badge bg-secondary">Khác</span>
                    break;
                }
              </span>
            </div>
          </div>
        </div>

        <!-- Chi tiết sản phẩm -->
        <h5 class="mb-3 border-bottom pb-2">Chi tiết sản phẩm</h5>
        <div class="table-responsive">
          <table class="table table-hover align-middle">
            <thead class="table-light">
              <tr>
                <th style="width: 10%">Mã SP</th>
                <th style="width: 25%">Tên sản phẩm</th>
                <th style="width: 15%">Ảnh</th>
                <th style="width: 15%">Đơn giá</th>
                <th style="width: 10%">SL</th>
                <th style="width: 15%">Thành tiền</th>
              </tr>
            </thead>
            <tbody>
              @foreach (var item in Model.OrderDetails)
              {
                <tr>
                  <td>@item.ProductId</td>
                  <td>@item.ProductName</td>
                  <td>
                    @if (!string.IsNullOrEmpty(item.ImageUrl))
                    {
                      <img src="@item.ImageUrl" alt="@item.ProductName"
                           class="img-thumbnail product-img" />
                    }
                    else
                    {
                      <span class="text-muted">Không có ảnh</span>
                    }
                  </td>
                  <td>@item.NewPrice.ToString("N0") ₫</td>
                  <td>@item.Quantity</td>
                  <td class="fw-bold">@item.TotalUnit.ToString("N0") ₫</td>
                </tr>
              }
            </tbody>
          </table>
        </div>

        <!-- Tổng cộng -->
        <div class="row mt-3">
          <div class="col-md-6"></div>
          <div class="col-md-6">
            <div class="d-flex justify-content-between border-top pt-2">
              <span class="fw-bold">Tổng cộng:</span>
              <span class="fw-bold text-danger fs-5">
                @Model.TotalPrice.ToString("N0") ₫
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="d-flex justify-content-center mt-4">
    <li><a class="dropdown-item" href="/Orders/IndexForCustomer"><i class="fas fa-box-open me-2"></i>Tất cả đơn hàng</a></li>
  </div>
</div>

<style>
  .success-container {
    background: white;
    border-radius: 10px;
    box-shadow: 0 0 15px rgba(0,0,0,0.05);
  }

  .success-icon {
    font-size: 80px;
    color: #28a745;
    margin-bottom: 20px;
  }

  .summary-box {
    background-color: #f8fafc;
    border-radius: 10px;
    border: 1px solid #e9ecef;
  }

  .info-item {
    padding: 8px 0;
  }

  .product-img {
    width: 60px;
    height: 60px;
    object-fit: cover;
    border-radius: 4px;
  }

  .table th {
    white-space: nowrap;
  }

  .table td, .table th {
    vertical-align: middle;
  }
  /* Màu sắc cho trạng thái */
  .bg-cash {
    background-color: #28a745 !important; /* Xanh lá */
    color: white !important;
  }

  .bg-bank-transfer {
    background-color: #17a2b8 !important; /* Xanh dương nhạt */
    color: white !important;
  }

  .bg-credit-card {
    background-color: #6f42c1 !important; /* Tím */
    color: white !important;
  }

  /* Tùy chỉnh thêm cho badge */
  .status-badge .badge,
  .payment-badge .badge {
    font-size: 0.85rem;
    padding: 0.35em 0.65em;
    font-weight: 500;
    border-radius: 4px;
  }

  /* Màu custom nếu cần */
  .bg-custom-1 {
    background-color: #ffc107 !important;
    color: #212529 !important;
  }

  .bg-custom-2 {
    background-color: #fd7e14 !important;
    color: white !important;
  }
</style>